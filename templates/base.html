<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="{{ config.description }}">
  <title>{% if page and page.title %}{{ page.title }} | {% elif section and section.title %}{{ section.title }} | {% endif %}{{ config.title }}</title>
  <script>
    (function () {
      try {
        function normalizeTheme(theme) {
          if (theme === "amber") return "yellow";
          return theme;
        }

        function seasonalTheme() {
          var month = new Date().getMonth();
          if (month === 11 || month === 0 || month === 1) return "blue";
          if (month >= 2 && month <= 4) return "green";
          if (month >= 5 && month <= 7) return "yellow";
          return "red";
        }

        var theme = normalizeTheme(localStorage.getItem("terminal-theme"));
        if (!theme) theme = seasonalTheme();
        if (theme) document.documentElement.setAttribute("data-theme", theme);
      } catch (e) {}
    })();
  </script>
  <link rel="icon" type="image/svg+xml" href="{{ get_url(path='favicon.svg', cachebust=true) }}">
  <link rel="icon" type="image/png" sizes="32x32" href="{{ get_url(path='favicon-32.png', cachebust=true) }}">
  <link rel="icon" type="image/png" sizes="16x16" href="{{ get_url(path='favicon-16.png', cachebust=true) }}">
  <link rel="apple-touch-icon" sizes="180x180" href="{{ get_url(path='apple-touch-icon.png', cachebust=true) }}">
  <link rel="alternate" type="application/atom+xml" title="Luke Osborne Blog Feed" href="{{ get_url(path='blog/atom.xml') }}">
  <link rel="stylesheet" href="{{ get_url(path='site.css', cachebust=true) }}">
</head>
<body>
  <div class="screen-noise"></div>
  <main class="shell">
    <header class="shell-header">
      <a class="brand" href="{{ get_url(path='@/_index.md') }}">lukoktonos.com</a>
      <nav>
        <a href="{{ get_url(path='@/blog/_index.md') }}">blog</a>
        <a href="{{ get_url(path='blog/atom.xml') }}">feed</a>
        <a href="{{ config.extra.github_url }}">github</a>
      </nav>
    </header>

    <section class="terminal">
      {% block content %}{% endblock content %}
    </section>

    <footer class="shell-footer">
      <span>&copy; {{ now() | date(format="%Y") }} Luke Osborne</span>
      <div class="footer-controls">
        <div class="theme-buttons" aria-label="Terminal color selector">
          <button type="button" class="theme-btn theme-btn--yellow" data-theme="yellow">Yellow</button>
          <button type="button" class="theme-btn theme-btn--green" data-theme="green">Green</button>
          <button type="button" class="theme-btn theme-btn--blue" data-theme="blue">Blue</button>
          <button type="button" class="theme-btn theme-btn--red" data-theme="red">Red</button>
        </div>
        <a href="{{ config.extra.repo_url }}">source</a>
      </div>
    </footer>
  </main>
  <script>
    (function () {
      var root = document.documentElement;
      var buttons = document.querySelectorAll(".theme-btn");
      if (!buttons.length) return;

      function normalizeTheme(theme) {
        if (theme === "amber") return "yellow";
        return theme;
      }

      function seasonalTheme() {
        var month = new Date().getMonth();
        if (month === 11 || month === 0 || month === 1) return "blue";
        if (month >= 2 && month <= 4) return "green";
        if (month >= 5 && month <= 7) return "yellow";
        return "red";
      }

      function applyTheme(theme) {
        theme = normalizeTheme(theme);
        root.setAttribute("data-theme", theme);
        try { localStorage.setItem("terminal-theme", theme); } catch (e) {}
        buttons.forEach(function (button) {
          var active = button.getAttribute("data-theme") === theme;
          button.setAttribute("aria-pressed", active ? "true" : "false");
        });
      }

      var initial = normalizeTheme(root.getAttribute("data-theme")) || seasonalTheme();
      applyTheme(initial);

      buttons.forEach(function (button) {
        button.addEventListener("click", function () {
          applyTheme(button.getAttribute("data-theme"));
        });
      });
    })();
  </script>
  {% block extra_scripts %}{% endblock extra_scripts %}
</body>
</html>
